<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	th:replace="~{fragments/header :: header (~{::body},'db')}">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trades</title>
    <link rel="stylesheet" href="../static/main.css" />
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css"
        rel="stylesheet">
</head>
<body class="container">
<div class="container">
	
	<h1>Trades</h1>
	<h2></h2>

    <table class="table table-striped table-bordered">
		<tr>
			<td>Symbol</td>
			<td>Description</td>
			<td>Quantity</td>
			<td>Date Acquired</td>
			<td>Date Sold</td>
			<td>Proceeds</td>
			<td>Cost Basis</td>
			<td>Short Term Gain/Loss</td>
			<td>Long Term Gain/Loss</td>
			<td>Action</td>
		</tr>
		<tr th:if="${#lists.isEmpty(trades)}">
			<td colspan="9">No Trade found.</td>
		</tr>
		<tr th:each="trade : ${trades}">
			<td th:text="${trade.symbol}"></td>
			<td th:text="${trade.description}"></td>
			<td th:text="${trade.quantity}"></td>
			<td th:text="${trade.dateAcquired}"></td>
			<td th:text="${trade.dateSold}"></td>
			<td th:text="${trade.proceeds}"></td>
			<td th:text="${trade.costBasis}"></td>
			<td th:text="${trade.shortTermGain}"></td>
			<td th:text="${trade.longTermGain}"></td>
			<td><a href="" th:href="@{/tradeController/editTrade(id=${trade.id})}">Edit Trade</a> | 
			<a href="" th:href="@{/tradeController/deleteTrade(id=${trade.id})}">Delete Trade</a></td>
		</tr>
	</table>	
</div>
<div th:if="${#ctx.containsVariable('trade')}" class="container">
	<h2>Edit Trade</h2>
	<form class="col card p-3 mb-5" th:method="post" th:action="@{'/tradeController/addUpdateTrade'}">
		<input name="id" th:value="${trade?.id}" type="hidden" />
		<div class="form-group">
			<label for="symbol">Symbol</label>
			<input class="form-control" name="sumbol" placeholder="Enter Security Symbol" th:value="${trade.symbol}" type="text" />
		</div>
		<div class="form-group">
			<label for="description">Description</label>
			<input class="form-control" name="description" placeholder="Enter Security Description" th:value="${trade.description}" type="text" />
		</div>
		<div class="form-group">
			<label for="quantity">Quantity</label>
			<input class="form-control" name="quantity" placeholder="Enter Quantity" th:value="${trade.quantity}" type="text" />
		</div>
		<div class="form-group">
			<label for="dateAcquired">Date Acquired</label>
			<input class="form-control" name="dateAcquired" placeholder="Enter Date Acquired" th:value="${trade.dateAcquired}" type="text" />
		</div>
		<div class="form-group">
			<label for="dateSold">Date Sold</label>
			<input class="form-control" name="dateSold" placeholder="Enter Date Sold" th:value="${trade.dateSold}" type="text" />
		</div>
		<div class="form-group">
			<label for="proceeds">Proceeds</label>
			<input class="form-control" name="proceeds" placeholder="Enter Proceeds" th:value="${trade.proceeds}" type="text" />
		</div>
		<div class="form-group">
			<label for="proceeds">Cost Basis</label>
			<input class="form-control" name="costBasis" placeholder="Enter Cost Basis" th:value="${trade.costBasis}" type="text" />
		</div>
		<div class="form-group">
			<label for="shortTermGain">Short Term Gain</label>
			<input class="form-control" name="shortTermGain" placeholder="Enter Short Term Gain" th:value="${trade.shortTermGain}" type="text" />
		</div>
		<div class="form-group">
			<label for="longTermGain">Long Term Gain</label>
			<input class="form-control" name="longTermGain" placeholder="Enter LongTerm Gain" th:value="${trade.longTermGain}" type="text" />
		</div>
		
		<input class="btn btn-primary" type="submit" value="Update Trade" />
		<input class="btn btn-primary" type="button" onclick="window.location.replace('/tradeController/trades')" value="Cancel" />
	</form>
</div>

<script>
function showNewTradeDiv() {
  var x = document.getElementById("newTrade");
  var y = document.getElementById("newTradeButton")
  if (x.style.display === "none") {
    x.style.display = "block";
    y.innerHTML="Cancel New Trade";
  } else {
    x.style.display = "none";
    y.innerHTML="Add New Trade";
  }
}
</script>
<div class="container" id="newTrade" style="display:none;">
	<h2>Add New Trade</h2>
	<form class="col card p-3 mb-5" th:method="post" th:action="@{'/tradeController/addUpdateTrade'}">
		<div class="form-group">
			<label for="symbol">Symbol</label>
			<input class="form-control" name="symbol" placeholder="Enter Security Symbol" value="" type="text" />
		</div>
		<div class="form-group">
			<label for="description">Description</label>
			<input class="form-control" name="description" placeholder="Enter Security Description" value="" type="text" />
		</div>
		<div class="form-group">
			<label for="quantity">Quantity</label>
			<input class="form-control" name="quantity" placeholder="Enter Quantity" value="" type="text" />
		</div>
		<div class="form-group">
			<label for="dateAcquired">Date Acquired</label>
			<input class="form-control" name="dateAcquired" placeholder="Enter Date Acquired" value="" type="date" />
		</div>
		<div class="form-group">
			<label for="dateSold">Date Sold</label>
			<input class="form-control" name="dateSold" placeholder="Enter Date Sold" value="" type="date" />
		</div>
		<div class="form-group">
			<label for="proceeds">Proceeds</label>
			<input class="form-control" name="proceeds" placeholder="Enter Proceeds" value="" type="text" />
		</div>
		<div class="form-group">
			<label for="proceeds">Cost Basis</label>
			<input class="form-control" name="costBasis" placeholder="Enter Cost Basis" value="" type="text" />
		</div>
		<div class="form-group">
			<label for="shortTermGain">Short Term Gain</label>
			<input class="form-control" name="shortTermGain" placeholder="Enter Short Term Gain" value="" type="text" />
		</div>
		<div class="form-group">
			<label for="longTermGain">Long Term Gain</label>
			<input class="form-control" name="longTermGain" placeholder="Enter LongTerm Gain" value="" type="text" />
		</div>
		
		<input class="btn btn-primary" type="submit" value="Save New Trade" />
	</form>
</div>
<div class="container"><br>
	<button class="btn btn-primary" id="newTradeButton" value="Add New Trade" onclick="showNewTradeDiv()">Add New Trade</button>
</div>

</body>
</html>
