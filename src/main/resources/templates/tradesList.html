<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	th:replace="~{fragments/header :: header (~{::body},'db')}">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Trades</title>
</head>
<body class="container">
<div class="container">
	
	<h1>Trades</h1>
	<h2></h2>
	
	<div>Select Account</div>
	<form th:method="post" th:action="trades" th:object="${selectedAccount}"> 
		<select class="form-control" id="accountDropdownList" name="selectedAccount" onchange="this.form.submit()"  >
			<option value="1">Select Account</option>
			<option th:each="account : ${accounts}" th:value="${account.id}" th:text="${account.name}" th:selected="${session.selectedAccount?.id == account.id}" ></option>
		</select>
	</form>
	<table class="table table-striped table-bordered">
		<tr>
			<th>Symbol</th>
			<th>Description</th>
			<th>Quantity</th>
			<th>Account</th>
			<th>Date Acquired</th>
			<th>Date Sold</th>
			<th>Proceeds</th>
			<th>Cost Basis</th>
			<th>Short Term Gain/Loss</th>
			<th>Long Term Gain/Loss</th>
			<th>Action</th>
		</tr>
		<tr th:if="${#lists.isEmpty(trades)}">
			<td colspan="10">No Trade found.</td>
		</tr>
		<tr th:each="trade : ${trades}">
			<td th:text="${trade.symbol}"></td>
			<td th:text="${trade.description}"></td>
			<td th:text="${trade.quantity}"></td>
			<td th:text="${trade.account?.name}"></td>
			<td th:text="${trade.dateAcquired}"></td>
			<td th:text="${trade.dateSold}"></td>
			<td th:text="${trade.proceeds}"></td>
			<td th:text="${trade.costBasis}"></td>
			<td th:text="${trade.shortTermGain}"></td>
			<td th:text="${trade.longTermGain}"></td>
			<td><a href="" th:href="@{/tradeEditController/editTrade(id=${trade.id})}">Edit Trade</a> | 
			<a href="" th:href="@{/tradeEditController/deleteTrade(id=${trade.id})}">Delete Trade</a></td>
		</tr>
	</table>
</div>
<div class="container"><br>
	<button class="btn btn-primary" id="newTradeButton" value="Add New Trade" onclick="window.location.replace('/tradeEditController/addTrade')">Add New Trade</button>
</div>
</body>
</html>