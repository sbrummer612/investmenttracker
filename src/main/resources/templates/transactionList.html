<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
	th:replace="~{fragments/header :: header (~{::body},'db')}">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Transactions</title>
    <link rel="stylesheet" href="../static/main.css" />
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.3/css/bootstrap.min.css"
        rel="stylesheet">
</head>
<body class="container">

<div class="container">
	
	<h1>Transactions</h1>
	<h2></h2>
	
	<div>Select Account</div>
	<form th:method="post" th:action="transactions" th:object="${selectedAccount}"> 
		<select class="form-control" id="accountDropdownList" name="selectedAccount" onchange="this.form.submit()"  >
			<option value="1">Select Account</option>
			<option th:each="account : ${accounts}" th:value="${account.id}" th:text="${account.name}" th:selected="${selectedAccount?.id == account.id}" ></option>
		</select>
		<label class="alert alert-warning" th:if="${#ctx.containsVariable('accountSelectionErrort')}" th:text="${accountSelectionErrort}">error</label>
	</form>
	<div class="col-sm-3">
		<input class="btn btn-primary" type="button" onclick="window.location.replace('/transactionController/importTransactions')" value="Import Transaction History" />
	</div>
	<table class="table table-striped table-bordered">
		<tr>
			<td>Transaction Date</td>
			<td>Symbol</td>
			<td>Account</td>
			<td>Security Description</td>
			<td>Quantity</td>
			<td>Amount</td>
			<td>Action</td>
		</tr>
		<tr th:if="${#lists.isEmpty(transactions)}">
			<td colspan="7">No Transactions found.</td>
		</tr>
		<tr th:each="transaction : ${transactions}">
			<td th:text="${transaction.transactionDate}"></td>
			<td th:text="${transaction.symbol}"></td>
			<td th:text="${transaction.account.name}"></td>
			<td th:text="${transaction.securityDescription}"></td>
			<td th:text="${transaction.quantity}"></td>
			<td th:text="${transaction.amount}"></td>
			<td th:text="${transaction.action}"></td>
		</tr>
	</table>
</div>
</body>
</html>